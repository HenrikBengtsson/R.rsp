<%
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
# Build meta data for vignettes
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
pathnames <- list.files(path=".", pattern="[.]Rnw$", full.names=FALSE);
fullnames <- gsub("[.]Rnw$", "", pathnames);
pdfs <- sprintf("%s.pdf", fullnames);
meta <- lapply(pathnames, FUN=parseVignette);
titles <- sapply(meta, FUN=function(x) x$IndexEntry);
sources <- sapply(meta, FUN=function(x) {
  ifelse(is.null(x$Source), "", x$Source);
});
exts <- mapply(sources, fullnames, FUN=function(s, prefix) {
  pattern <- sprintf("^%s[.]", prefix);
  gsub(pattern, "", s);
});
toc <- data.frame(title=titles, pdf=pdfs, source=sources, ext=exts, stringsAsFactors=FALSE);



# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
# Identify package name
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
pkgName <- grep("Package:", readLines("../../DESCRIPTION"), value=TRUE);
pkgName <- gsub("Package:", "", pkgName);
pkgName <- gsub("[ \t]*", "", pkgName);
pkg <- Package(pkgName);
%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
 <title><%=getName(pkg)%> User Guides</title>
 <link rel="stylesheet" type="text/css" href="../../R.css">
</head>
<body>

<h1><%=getTitle(pkg)%> <img class="toplogo" src="../../../doc/html/logo.jpg" alt="[R logo]" width="101" height="77"></h1>
<hr>

<h2>User Guides and Package Vignettes</h2>
<ul>
<% for (ii in seq(length=nrow(toc))) { %>
 <li>
 <strong><%=toc$title[[ii]]%></strong> 
 [<a href="<%=toc$pdf[[ii]]%>">pdf</a>]
 <% if (toc$source[[ii]] != "") { %>
   [<a href="<%=toc$source[[ii]]%>"><%=toc$ext[[ii]]%></a>]
 <% } %>
 </li>
<% } # for (ii ...) %>
</ul>
<br>

<hr>
<div align="center"><a href="../html/00Index.html">[Package Contents]</a></div>
<br>
<div align="center"><small>This page was generated by the <a href="http://cran.r-project.org/web/packages/R.rsp/">R.rsp</a> package.</small></div>

</body>
</html>
